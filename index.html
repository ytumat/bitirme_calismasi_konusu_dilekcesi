<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>DilekÃ§e OluÅŸtur</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <style>
    body {
      font-family: calibri, "Times New Roman", serif;
      background-color: #f4f4f4;
      padding: 20px;
    }

    .container {
      max-width: 800px;
      margin: auto;
      background: white;
      padding: 30px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    input, select, textarea {
      font-size: 16px;
      margin-top: 6px;
      margin-bottom: 16px;
      box-sizing: border-box;
    }

    input, select, textarea {
      width: 100%;
      padding: 8px;
    }

    button {
      padding: 10px 20px;
      font-size: 16px;
      margin-right: 10px;
    }

    .letter-section {
      display: none;
      margin-top: 40px;
      padding: 40px;
      background: white;
      border: none;
    }

    .left-text {
      text-align: justify;
      margin-top: 20px;
      white-space: pre-line;
    }

    .download-button {
      display: none;
      margin-top: 20px;
    }

    #ogrenciBilgileri {
      text-align: left;
    }

    #tarihImzaContainer {
      margin-top: 10px;
      text-align: right;
    }

    #tarihYeri {
      margin-bottom: 1cm;
    }

    #bolumBaskaniKutu {
      text-align: right;
      width: fit-content;
      margin-left: auto;
      margin-top: 140px;
    }

    #bolumBaskaniBaslik {
      font-weight: bold;
    }

    #bolumBaskaniAdi {
      margin-top: 5px;
      font-weight: normal;
      display: block;
    }

    .row-flex {
      display: flex;
      gap: 10px;
    }

    .row-flex > * {
      flex: 1;
    }

    @media print {
      body * {
        visibility: hidden;
      }

      .letter-section, .letter-section * {
        visibility: visible;
      }

      .letter-section {
        position: absolute;
        top: 0;
        left: 0;
        width: 210mm;
        height: 297mm;
        background: white !important;
        padding: 40px;
        margin: 0;
        box-shadow: none !important;
        border: none !important;
      }

      .download-button {
        display: none !important;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Bitirme Ã‡alÄ±ÅŸmasÄ± Alma DilekÃ§esi OluÅŸturma</h2>
    <form id="dilekceForm">
      <label>AdÄ±nÄ±z:</label>
      <input type="text" id="ad" required />

      <label>SoyadÄ±nÄ±z:</label>
      <input type="text" id="soyad" required />

      <label>Ã–ÄŸrenci NumarasÄ±:</label>
      <input type="text" id="numara" required />

      <label>E-posta:</label>
      <input type="email" id="email" required />

      <label>Cep Telefonu:</label>
      <input type="text" id="telefon" required />

      <label>Bitirme Ã‡alÄ±ÅŸmasÄ± AldÄ±ÄŸÄ±nÄ±z Ã–ÄŸretim Ãœyesi:</label>
      <div class="row-flex">
        <select id="unvan" required>
          <option value="" disabled selected>Ãœnvan SeÃ§iniz</option>
          <option value="Prof. Dr.">Prof. Dr.</option>
          <option value="DoÃ§. Dr.">DoÃ§. Dr.</option>
          <option value="Dr. Ã–ÄŸr. Ãœyesi">Dr. Ã–ÄŸr. Ãœyesi</option>
          <option value="Ã–ÄŸr. GÃ¶r. Dr.">Ã–ÄŸr. GÃ¶r. Dr.</option>
        </select>
        <input type="text" id="danismanAdSoyad" placeholder="Ad Soyad" required />
      </div>

      <label>Bitirme Ã‡alÄ±ÅŸmasÄ± Konusu:</label>
      <textarea id="tezkonusu" rows="5" required placeholder=""></textarea>

      <select id="bolumSelect" style="display: none;">
        <option value="MATEMATÄ°K BÃ–LÃœMÃœ" selected>MATEMATÄ°K</option>
      </select>

      <button type="submit">DilekÃ§eyi OluÅŸtur</button>
    </form>

    <div class="letter-section" id="dilekceOutput">
      <div style="text-align: center; line-height: 1.4; margin: 0; padding: 0;">
        <div>YILDIZ TEKNÄ°K ÃœNÄ°VERSÄ°TESÄ°</div>
        <div>FEN-EDEBÄ°YAT FAKÃœLTESÄ°</div>
        <div id="bolumYazisi" style="font-weight: bold; margin: 0; padding: 0;"></div>
      </div>

      <p style="text-align: center;">
        2025-2026 GÃœZ YARIYILI<br>
        <strong id="dersKodu">MAT9000 BÄ°TÄ°RME Ã‡ALIÅžMASI</strong>
      </p>

      <div class="left-text" id="ogrenciBilgileri"></div>

      <div id="tarihImzaContainer">
        <p id="tarihYeri"></p>
        <p id="imzaAlani">Ä°mza: _________</p>
      </div>

      <p style="margin-top: 40px;"><strong>BÄ°TÄ°RME Ã‡ALIÅžMASININ KONUSU:</strong><br><span id="tezkonusuMetni"></span></p>

      <br><br><br>
      <p style="margin-top: 40px;"><strong>DERS YÃœRÃœTÃœCÃœSÃœ:</strong><br> <span id="danismanMetni"></span></p>

      <div id="bolumBaskaniKutu">
        <span id="bolumBaskaniBaslik">BÃ–LÃœM BAÅžKANI</span><br />
        <span id="bolumBaskaniAdi"></span>
      </div>
    </div>

    <div class="download-button" id="downloadBtnDiv">
      <button id="downloadBtn">ðŸ“¥ PDF Olarak Ä°ndir</button>
    </div>
  </div>

  <script>
    const bolumBaskanlari = {
      "MATEMATÄ°K BÃ–LÃœMÃœ": "Prof. Dr. Mustafa DÃœLDÃœL"
    };

    const bolumKisaltmalari = {
      "MATEMATÄ°K BÃ–LÃœMÃœ": "MAT9000"
    };

    document.getElementById("dilekceForm").addEventListener("submit", function (e) {
      e.preventDefault();

      const ad = document.getElementById("ad").value.trim();
      const soyad = document.getElementById("soyad").value.trim();
      const numara = document.getElementById("numara").value.trim();
      const email = document.getElementById("email").value.trim();
      const telefon = document.getElementById("telefon").value.trim();
      const bolum = document.getElementById("bolumSelect").value;
      const tezkonusu = document.getElementById("tezkonusu").value.trim();

      const unvan = document.getElementById("unvan").value;
      const danismanAdSoyad = document.getElementById("danismanAdSoyad").value.trim();
      const danisman = `${unvan} ${danismanAdSoyad}`;

      const adSoyad = `${ad}_${soyad}`.replace(/\s+/g, "_");
      const today = new Date();
      const formattedDate = today.toLocaleDateString("tr-TR");

      const bilgiler = `<strong>Ad Soyad:</strong> ${ad} ${soyad}<br>
<strong>Ã–ÄŸrenci No:</strong> ${numara}<br>
<strong>E-posta:</strong> ${email}<br>
<strong>Cep Telefonu:</strong> ${telefon}<br>`;

      document.getElementById("ogrenciBilgileri").innerHTML = bilgiler;
      document.getElementById("tezkonusuMetni").innerText = tezkonusu;
      document.getElementById("tarihYeri").innerText = `Tarih: ${formattedDate}`;
      document.getElementById("danismanMetni").innerText = danisman;
      document.getElementById("bolumYazisi").innerHTML = bolum;
      document.getElementById("bolumBaskaniAdi").innerText = bolumBaskanlari[bolum] || "";
      document.getElementById("dersKodu").innerText = `${bolumKisaltmalari[bolum] || "DERSKODU"} BÄ°TÄ°RME Ã‡ALIÅžMASI`;

      document.getElementById("dilekceOutput").style.display = "block";
      document.getElementById("downloadBtnDiv").style.display = "block";

      window.adSoyad = adSoyad;
    });

    document.getElementById("downloadBtn").addEventListener("click", function () {
      const element = document.getElementById("dilekceOutput");
      element.style.display = "block";

      setTimeout(() => {
        const opt = {
          margin: 0.5,
          filename: `${window.adSoyad || "dilekce"}.pdf`,
          image: { type: "jpeg", quality: 0.98 },
          html2canvas: { scale: 2, scrollX: 0, scrollY: 0 },
          jsPDF: { unit: "in", format: "a4", orientation: "portrait" }
        };

        html2pdf().set(opt).from(element).save();
      }, 200);
    });
  </script>
</body>
</html>

